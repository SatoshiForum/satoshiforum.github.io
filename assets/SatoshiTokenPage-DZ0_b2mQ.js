import{_ as b,c as m,o as _,b as s,w as l,a as e,r as o,t as r,i as w,d as T,E as p,C as k,u as x}from"./index-BRr0H7yo.js";const P={name:"SatoshiTokenPage",data(){return{claimed:!1,claiming:!1,claimCdBlocks:0,myBalance:0,toalSupply:0,timer:null,curBlock:0,lastReqClaimBlock:-1}},computed:{userStore(){return x()}},mounted(){let a=this;this.timer=setInterval(()=>{a.checkClaimStatus()},4e3),this.checkClaimStatus()},unmounted(){this.timer&&(clearInterval(this.timer),this.timer=null)},methods:{async checkClaimStatus(){if(!this.userStore.isConnected)return;const a=await k.loadSatoshiTokenState(this.userStore.walletAddress);this.myBalance=a.balance/100000000n,this.toalSupply=a.supply/100000000n,this.curBlock=a.curBlock;const t=144-(this.curBlock-a.lastClaimBlock);t>0?(this.claimed=!0,this.claimCdBlocks=t):(this.claimed=!1,this.claimCdBlocks=0)},async handleClaim(){if(!this.userStore.isConnected){p.warning("Please connect your wallet first");return}if(this.claimed){p.warning("You have already claimed today");return}if(this.lastReqClaimBlock==this.curBlock)return;let a=this;k.claimSatoshiToken(function(){a.lastReqClaimBlock=a.curBlock})}}},R={class:"token-page"},N={class:"token-info"},q={class:"balance-section"},I={class:"balance-amount"},V={class:"amount"},D={class:"claim-section"},E={class:"claim-info"},U={key:0,class:"next-claim"},z={class:"token-stats"},G={class:"stat-item"},Y={class:"stat-value"},A={class:"token-usage"},H={class:"usage-item"},M={class:"usage-item"},j={class:"usage-item"},F={class:"usage-item"};function J(a,t,K,L,i,d){const h=o("Coin"),n=o("el-icon"),u=o("el-divider"),f=o("Gift"),C=o("Present"),v=o("el-button"),S=o("el-col"),B=o("el-row"),c=o("CircleCheck"),y=o("el-space"),g=o("el-card");return _(),m("div",R,[s(g,{class:"token-card"},{default:l(()=>[t[10]||(t[10]=e("div",{class:"token-header"},[e("h2",null,"$Satoshi Token")],-1)),e("div",N,[e("div",q,[t[1]||(t[1]=e("div",{class:"balance-label"},"Your Balance",-1)),e("div",I,[s(n,{class:"coin-icon"},{default:l(()=>[s(h)]),_:1}),e("span",V,r(d.userStore.isConnected?i.myBalance:0),1),t[0]||(t[0]=e("span",{class:"token-symbol"},"$Satoshi",-1))])]),s(u),e("div",D,[e("div",E,[s(n,{class:"gift-icon"},{default:l(()=>[s(f)]),_:1}),t[2]||(t[2]=e("div",{class:"claim-text"},[e("h3",null,"Daily Reward"),e("p",null,"Claim 50 $Satoshi per 24 hours(144 Bitcoin blocks)!")],-1))]),s(v,{type:"primary",size:"large",disabled:!d.userStore.isConnected||i.claimed,onClick:d.handleClaim},{default:l(()=>[s(n,null,{default:l(()=>[s(C)]),_:1}),T(" "+r(i.claimed?"Claimed Today":i.lastReqClaimBlock==i.curBlock?"Claim transaction sent":"Claim 50 $Satoshi"),1)]),_:1},8,["disabled","onClick"]),i.claimed?(_(),m("div",U," Next claim available after "+r(i.claimCdBlocks)+" Bitcoin blocks. ",1)):w("",!0)]),s(u),e("div",z,[t[4]||(t[4]=e("h3",null,"Token Statistics",-1)),s(B,{gutter:20},{default:l(()=>[s(S,{span:12},{default:l(()=>[e("div",G,[t[3]||(t[3]=e("div",{class:"stat-label"},"Total Supply",-1)),e("div",Y,r(i.toalSupply),1)])]),_:1})]),_:1})]),s(u),e("div",A,[t[9]||(t[9]=e("h3",null,"Token Usage",-1)),s(y,{direction:"vertical",size:12,style:{width:"100%"}},{default:l(()=>[e("div",H,[s(n,{color:"#67c23a"},{default:l(()=>[s(c)]),_:1}),t[5]||(t[5]=e("span",null,"Register SatoshiID names",-1))]),e("div",M,[s(n,{color:"#67c23a"},{default:l(()=>[s(c)]),_:1}),t[6]||(t[6]=e("span",null,"Tip content creators",-1))]),e("div",j,[s(n,{color:"#67c23a"},{default:l(()=>[s(c)]),_:1}),t[7]||(t[7]=e("span",null,"Unlock premium features",-1))]),e("div",F,[s(n,{color:"#67c23a"},{default:l(()=>[s(c)]),_:1}),t[8]||(t[8]=e("span",null,"Participate in governance",-1))])]),_:1})])])]),_:1})])}const Q=b(P,[["render",J],["__scopeId","data-v-e585ff86"]]);export{Q as default};
