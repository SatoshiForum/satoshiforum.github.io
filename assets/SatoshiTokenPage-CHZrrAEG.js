import{_ as b,c as m,o as _,b as s,w as l,a as t,r as o,t as r,i as w,d as T,E as p,C as k,u as x}from"./index-DSfp38Jk.js";const P={name:"SatoshiTokenPage",data(){return{claimed:!1,claiming:!1,claimCdBlocks:0,myBalance:0,toalSupply:0,timer:null,curBlock:0,lastReqClaimBlock:-1}},computed:{userStore(){return x()}},mounted(){this.checkClaimStatus()},activated(){let i=this;this.timer=setInterval(()=>{i.checkClaimStatus()},4e3)},deactivated(){this.timer&&(clearInterval(this.timer),this.timer=null)},methods:{async checkClaimStatus(){if(!this.userStore.isConnected)return;const i=await k.loadSatoshiTokenState(this.userStore.walletAddress);this.myBalance=i.balance/100000000n,this.toalSupply=i.supply/100000000n,this.curBlock=i.curBlock;const e=144-(this.curBlock-i.lastClaimBlock);e>0?(this.claimed=!0,this.claimCdBlocks=e):(this.claimed=!1,this.claimCdBlocks=0)},async handleClaim(){if(!this.userStore.isConnected){p.warning("Please connect your wallet first");return}if(this.claimed){p.warning("You have already claimed today");return}this.lastReqClaimBlock!=this.curBlock&&(k.claimSatoshiToken(),this.lastReqClaimBlock=this.curBlock)}}},R={class:"token-page"},N={class:"token-info"},q={class:"balance-section"},I={class:"balance-amount"},V={class:"amount"},D={class:"claim-section"},E={class:"claim-info"},U={key:0,class:"next-claim"},z={class:"token-stats"},G={class:"stat-item"},Y={class:"stat-value"},A={class:"token-usage"},H={class:"usage-item"},M={class:"usage-item"},j={class:"usage-item"},F={class:"usage-item"};function J(i,e,K,L,a,d){const h=o("Coin"),n=o("el-icon"),u=o("el-divider"),f=o("Gift"),C=o("Present"),v=o("el-button"),S=o("el-col"),B=o("el-row"),c=o("CircleCheck"),y=o("el-space"),g=o("el-card");return _(),m("div",R,[s(g,{class:"token-card"},{default:l(()=>[e[10]||(e[10]=t("div",{class:"token-header"},[t("h2",null,"$Satoshi Token")],-1)),t("div",N,[t("div",q,[e[1]||(e[1]=t("div",{class:"balance-label"},"Your Balance",-1)),t("div",I,[s(n,{class:"coin-icon"},{default:l(()=>[s(h)]),_:1}),t("span",V,r(d.userStore.isConnected?a.myBalance:0),1),e[0]||(e[0]=t("span",{class:"token-symbol"},"$Satoshi",-1))])]),s(u),t("div",D,[t("div",E,[s(n,{class:"gift-icon"},{default:l(()=>[s(f)]),_:1}),e[2]||(e[2]=t("div",{class:"claim-text"},[t("h3",null,"Daily Reward"),t("p",null,"Claim 50 $Satoshi per 24 hours(144 Bitcoin blocks)!")],-1))]),s(v,{type:"primary",size:"large",disabled:!d.userStore.isConnected||a.claimed,onClick:d.handleClaim},{default:l(()=>[s(n,null,{default:l(()=>[s(C)]),_:1}),T(" "+r(a.claimed?"Claimed Today":a.lastReqClaimBlock==a.curBlock?"Claim transaction sent":"Claim 50 $Satoshi"),1)]),_:1},8,["disabled","onClick"]),a.claimed?(_(),m("div",U," Next claim available after "+r(a.claimCdBlocks)+" Bitcoin blocks. ",1)):w("",!0)]),s(u),t("div",z,[e[4]||(e[4]=t("h3",null,"Token Statistics",-1)),s(B,{gutter:20},{default:l(()=>[s(S,{span:12},{default:l(()=>[t("div",G,[e[3]||(e[3]=t("div",{class:"stat-label"},"Total Supply",-1)),t("div",Y,r(a.toalSupply),1)])]),_:1})]),_:1})]),s(u),t("div",A,[e[9]||(e[9]=t("h3",null,"Token Usage",-1)),s(y,{direction:"vertical",size:12,style:{width:"100%"}},{default:l(()=>[t("div",H,[s(n,{color:"#67c23a"},{default:l(()=>[s(c)]),_:1}),e[5]||(e[5]=t("span",null,"Register SatoshiID names",-1))]),t("div",M,[s(n,{color:"#67c23a"},{default:l(()=>[s(c)]),_:1}),e[6]||(e[6]=t("span",null,"Tip content creators",-1))]),t("div",j,[s(n,{color:"#67c23a"},{default:l(()=>[s(c)]),_:1}),e[7]||(e[7]=t("span",null,"Unlock premium features",-1))]),t("div",F,[s(n,{color:"#67c23a"},{default:l(()=>[s(c)]),_:1}),e[8]||(e[8]=t("span",null,"Participate in governance",-1))])]),_:1})])])]),_:1})])}const Q=b(P,[["render",J],["__scopeId","data-v-a1408ad9"]]);export{Q as default};
